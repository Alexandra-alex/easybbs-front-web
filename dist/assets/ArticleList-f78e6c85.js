import{A as $}from"./ArticleListItem-83b88a0c.js";import{q as D,s as T,G as w,y as O,x as o,Q as f,a as I,o as u,j as v,k as s,b as r,w as g,L as n,F as R,p as j,n as q,v as z,u as F,m as h,t as E}from"./.pnpm-d8f10c30.js";import"./_plugin-vue_export-helper-c27b6911.js";const G={key:0,class:"sub-board"},M={class:"article-panel"},P={class:"top-tab"},Q={class:"article-list"},K={__name:"ArticleList",setup(V){const{proxy:y}=D();T();const x=w(),d=O(),S={loadArticle:"/forum/loadArticle"},m=e=>{i.value=e,b()},l=o(0),c=o(0),i=o(0),p=o(!1),_=o({}),b=async()=>{p.value=!0;let e={pageNo:_.value.pageNo,pBoardId:l.value,boardId:c.value,orderType:i.value},t=await y.Request({url:S.loadArticle,params:e,showLoading:!1});p.value=!1,t&&(_.value=t.data)},B=o([]),L=()=>{B.value=d.getters.getSubBoardList(l.value)};f(()=>x.params,(e,t)=>{Object.keys(e).length!=0&&!e.pBoardId&&!e.boardId||(l.value=e.pBoardId,c.value=e.boardId||0,L(),b(),d.commit("setActivePboardId",e.pBoardId),d.commit("setActiveBoardId",e.boardId))},{immediate:!0,deep:!0}),f(()=>d.state.boardList,(e,t)=>{L()},{immediate:!0,deep:!0});const C=o(!1);return f(()=>d.state.sysSetting,(e,t)=>{e&&(C.value=e.commentOpen)},{immediate:!0,deep:!0}),(e,t)=>{const k=I("router-link"),A=I("el-divider"),N=I("DataList");return u(),v("div",{class:"container-body article-list-body",style:z({width:F(y).globalInfo.bodyWidth+"px"})},[l.value?(u(),v("div",G,[s("span",{class:n(["board-item",c.value==0?"active":""])},[r(k,{to:`/forum/${l.value}`},{default:g(()=>[h("全部")]),_:1},8,["to"])],2),(u(!0),v(R,null,j(B.value,a=>(u(),v("span",{class:n(["board-item",a.boardId==c.value?"active":""])},[r(k,{to:`/forum/${a.pBoardId}/${a.boardId}`},{default:g(()=>[h(E(a.boardName),1)]),_:2},1032,["to"])],2))),256))])):q("",!0),s("div",M,[s("div",P,[s("div",{class:n(["tab",i.value==0?"active":""]),onClick:t[0]||(t[0]=a=>m(0))}," 热榜 ",2),r(A,{direction:"vertical"}),s("div",{class:n(["tab",i.value==1?"active":""]),onClick:t[1]||(t[1]=a=>m(1))}," 发布时间 ",2),r(A,{direction:"vertical"}),s("div",{class:n(["tab",i.value==2?"active":""]),onClick:t[2]||(t[2]=a=>m(2))}," 最新 ",2)]),s("div",Q,[r(N,{loading:p.value,dataSource:_.value,onLoadData:b,noDataMsg:"没有发现帖子，赶紧发布一个吧"},{default:g(({data:a})=>[r($,{data:a,showComment:C.value},null,8,["data","showComment"])]),_:1},8,["loading","dataSource"])])])],4)}}};export{K as default};

import{q as x,s as A,G as H,y as D,x as p,Q as I,a as v,o as c,j as u,k as s,b as t,w as o,v as S,u as V,m as a,t as n,n as r}from"./.pnpm-d8f10c30.js";const P={class:"user-banner"},B=s("span",{class:"iconfont icon-right"},null,-1),R=s("span",null,"消息中心",-1),q={class:"message-panel"},j={class:"tab-list"},z={class:"tab-item"},E=s("span",null,"回复我的",-1),G={key:0,class:"count-tag"},Q={class:"tab-item"},W=s("span",null,"赞了我的文章",-1),F={key:0,class:"count-tag"},J={class:"tab-item"},K=s("span",null,"下载了我的附件",-1),O={key:0,class:"count-tag"},X={class:"tab-item"},Y=s("span",null,"赞了我的评论",-1),Z={key:0,class:"count-tag"},ee={class:"tab-item"},se=s("span",null,"系统消息",-1),te={key:0,class:"count-tag"},ae={class:"message-list"},ne={key:0,class:"message-item"},oe={class:"message-content"},le=["innerHTML"],ie={class:"create-time"},ce={key:1,class:"message-item"},ue={class:"message-content"},de={class:"create-time"},re=["innerHTML"],_e={key:2,class:"message-item"},me={class:"message-content"},pe={class:"create-time"},ve=["innerHTML"],he={key:3,class:"message-item"},ge={class:"message-content"},ke={class:"create-time"},ye={key:4,class:"message-item"},fe={class:"message-content"},Ie={class:"create-time"},Ce={__name:"MessageList",setup(be){const{proxy:b}=x(),L=A(),N=H(),k=D(),M={loadMessageList:"/userCenter/loadMessageList"},h=p("reply"),w=i=>{L.push(`/user/message/${i}`)},y=p(!1),f=p({}),T=async()=>{y.value=!0;let i={pageNo:f.value.pageNo,code:h.value},_=await b.Request({url:M.loadMessageList,params:i,showLoading:!1});y.value=!1,_&&(f.value=_.data,k.commit("readMessage",h.value))};I(()=>N.params.type,(i,_)=>{i&&(h.value=i,T())},{immediate:!0,deep:!0});const C=p(null);I(()=>k.state.loginUserInfo,(i,_)=>{i&&(C.value=i.userId)},{immediate:!0,deep:!0});const l=p({});return I(()=>k.state.messageCountInfo,(i,_)=>{l.value=i||{}},{immediate:!0,deep:!0}),(i,_)=>{const d=v("router-link"),m=v("el-tab-pane"),$=v("el-tabs"),g=v("Avatar"),U=v("DataList");return c(),u("div",{class:"container-body message-center",style:S({width:V(b).globalInfo.bodyWidth+"px"})},[s("div",P,[t(d,{to:"/",class:"a-link"},{default:o(()=>[a("首页")]),_:1}),B,R]),s("div",q,[s("div",j,[t($,{"model-value":h.value,onTabChange:w},{default:o(()=>[t(m,{name:"reply"},{label:o(()=>[s("div",z,[E,l.value.reply>0?(c(),u("span",G,n(l.value.reply>99?"99+":l.value.reply),1)):r("",!0)])]),_:1}),t(m,{name:"likePost"},{label:o(()=>[s("div",Q,[W,l.value.likePost>0?(c(),u("span",F,n(l.value.likePost>99?"99+":l.value.likePost),1)):r("",!0)])]),_:1}),t(m,{name:"downloadAttachment"},{label:o(()=>[s("div",J,[K,l.value.downloadAttachment>0?(c(),u("span",O,n(l.value.downloadAttachment>99?"99+":l.value.downloadAttachment),1)):r("",!0)])]),_:1}),t(m,{name:"likeComment"},{label:o(()=>[s("div",X,[Y,l.value.likeComment>0?(c(),u("span",Z,n(l.value.likeComment>99?"99+":l.value.likeComment),1)):r("",!0)])]),_:1}),t(m,{name:"sys"},{label:o(()=>[s("div",ee,[se,l.value.sys>0?(c(),u("span",te,n(l.value.sys>99?"99+":l.value.sys),1)):r("",!0)])]),_:1})]),_:1},8,["model-value"]),t(d,{to:`/user/${C.value}`,class:"a-link go-ucenter"},{default:o(()=>[a("<<个人中心")]),_:1},8,["to"])]),s("div",ae,[t(U,{loading:y.value,dataSource:f.value,onLoadData:T,noDataMsg:"暂无消息"},{default:o(({data:e})=>[e.messageType==0?(c(),u("div",ne,[s("div",oe,[s("span",{innerHTML:e.messageContent},null,8,le),s("span",ie,n(e.createTime),1)])])):r("",!0),e.messageType==1?(c(),u("div",ce,[t(g,{userId:e.sendUserId,width:50},null,8,["userId"]),s("div",ue,[s("div",null,[t(d,{class:"a-link",to:`/user/${e.sendUserId}`},{default:o(()=>[a("@"+n(e.sendNickName),1)]),_:2},1032,["to"]),a(" 对我的文章【"),t(d,{class:"a-link",to:`/post/${e.articleId}`},{default:o(()=>[a(n(e.articleTitle),1)]),_:2},1032,["to"]),a("】发表了评论 "),s("span",de,n(e.createTime),1)]),s("div",{class:"reply-content",innerHTML:e.messageContent},null,8,re)])])):r("",!0),e.messageType==3?(c(),u("div",_e,[t(g,{userId:e.sendUserId,width:50},null,8,["userId"]),s("div",me,[s("div",null,[t(d,{class:"a-link",to:`/user/${e.sendUserId}`},{default:o(()=>[a("@"+n(e.sendNickName),1)]),_:2},1032,["to"]),a(" 在文章【"),t(d,{class:"a-link",to:`/post/${e.articleId}`},{default:o(()=>[a(n(e.articleTitle),1)]),_:2},1032,["to"]),a("】中赞了我的评论 "),s("span",pe,n(e.createTime),1)]),s("div",{class:"reply-content",innerHTML:e.messageContent},null,8,ve)])])):r("",!0),e.messageType==2?(c(),u("div",he,[t(g,{userId:e.sendUserId,width:50},null,8,["userId"]),s("div",ge,[s("div",null,[t(d,{class:"a-link",to:`/user/${e.sendUserId}`},{default:o(()=>[a("@"+n(e.sendNickName),1)]),_:2},1032,["to"]),a(" 赞了我的文章【"),t(d,{class:"a-link",to:`/post/${e.articleId}`},{default:o(()=>[a(n(e.articleTitle),1)]),_:2},1032,["to"]),a("】 "),s("span",ke,n(e.createTime),1)])])])):r("",!0),e.messageType==4?(c(),u("div",ye,[t(g,{userId:e.sendUserId,width:50},null,8,["userId"]),s("div",fe,[s("div",null,[t(d,{class:"a-link",to:`/user/${e.sendUserId}`},{default:o(()=>[a("@"+n(e.sendNickName),1)]),_:2},1032,["to"]),a(" 在文章【"),t(d,{class:"a-link",to:`/post/${e.articleId}`},{default:o(()=>[a(n(e.articleTitle),1)]),_:2},1032,["to"]),a("】中下载了我的附件 "),s("span",Ie,n(e.createTime),1)])])])):r("",!0)]),_:1},8,["loading","dataSource"])])])],4)}}};export{Ce as default};
